#!/bin/zsh

# define zsh as default shell
chsh -s /bin/zsh $USER

if ! type "git" > /dev/null; then
    if [[ "$(uname -s)" == "Darwin" ]]
    then
        # todo add an alternative to grab xcode from another computer accessible by local network
        xcode-select --install
        echo "Press return when XCode Developer Tools are installed"
        read -k
    fi
fi

if [[ ! -d $HOME/dotfiles ]]
then
    git clone http://github.com/MoOx/dotfiles.git $HOME/dotfiles
else
    cd $HOME/dotfiles
    git pull
fi

. $HOME/dotfiles/bin/fireinthehole --full

echo_title "First run some applications"

defaults write loginwindow AutoLaunchedApplicationDictionary -array-add '{ "Path" = "/path/to/itemname"; "Hide" = 0; }'
open "/Applications/Alfred 2.app"
open "/Applications/BitTorrent Sync.app"
open "/Applications/Cloud.app"
open "/Applications/Dash.app"
open "/Applications/Dropbox.app"
open "/Applications/Flux.app"
open "/Applications/Flycut.app"
open "/Applications/LimeChat.app"
open "/Applications/Shortcat.app"
open "/Applications/XtraFinder.app"
open "/Applications/Day-O.app"
open "$HOME/Applications/FirefoxNightly.app"
open "$HOME/Applications/Last.fm.app"
open "$HOME/Applications/Slate.app"
open "$HOME/Applications/Tunnelblick.app"
#open "/Users/${USER}/Applications/"

# todo add login items
# defaults write loginwindow AutoLaunchedApplicationDictionary -array-add '{ "Path" = "/Applications/$APP.app"; "Hide" = 0; }'

if ! type "say" > /dev/null
then
  say "YO BITCH, setup is done \!"
  sleep 5
  say "HEY BITCH ! Did you heard what I just said \?"
fi
